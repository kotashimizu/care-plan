# 個別支援計画書システム改善提案書

## 1. クライアント要望の分析

### 1.1 現在の課題
- **事業種別による内容の差別化不足**
  - B型: 生活習慣（昼夜逆転等）への軽いアプローチ
  - 生活介護/自立支援: 金銭管理等の深い生活スキル重視
  - 現在は全事業種別で同一プロンプト使用

- **支援目標提案の選択肢不足**
  - 各領域で単一提案のみ
  - 同じ課題でも複数のアプローチ視点が必要
    - 例: 作業スキル → ①強み活用型 ②段階的育成型 ③生産性重視型

### 1.2 事業種別の特性分析
```
就労継続支援B型・A型（類似）:
├─ 作業継続性・技能向上重視
├─ 生活リズム安定化（軽度介入）
└─ 就労移行への準備

就労移行支援（特殊）:
├─ 企業就労に向けた集中的支援
├─ ビジネスマナー・実習重視
└─ 期限付き支援（2年間）

生活介護・自立訓練（深い生活支援）:
├─ 金銭管理・買い物スキル
├─ 日常生活動作（ADL）
└─ 社会参加・地域生活
```

## 2. システム改善提案

### 2.1 事業種別特化プロンプトシステム

#### 現在の実装状況
- **ファイル**: `src/lib/prompts.ts`
- **問題**: 全事業種別で統一プロンプト（行22-86）
- **事業種別情報**: 単純な文字列挿入のみ（行17）

#### 改善案: 3層プロンプト構造
```
基盤プロンプト（共通）
├─ 障害者総合支援法準拠
├─ ICFモデル適用
└─ SMART原則

事業種別特化層
├─ 就労系プロンプト（A型・B型・移行）
├─ 生活系プロンプト（生活介護・生活訓練）
└─ 機能系プロンプト（機能訓練）

個別化層
├─ 利用者特性反映
├─ 事業所特徴活用
└─ 地域資源連携
```

### 2.2 支援目標3択システム

#### 各支援領域での多角的提案
**就労支援領域**:
- **パターンA（ストレングス活用）**: 本人の得意分野を活かした作業スキル向上
- **パターンB（段階的育成）**: 基礎から応用への体系的スキルアップ
- **パターンC（課題解決集中）**: 特定の弱点克服に集中した支援

**日常生活支援領域**:
- **パターンA（自立促進）**: 本人主体の生活スキル獲得
- **パターンB（支援付き自立）**: 段階的支援減少による自立支援
- **パターンC（環境調整）**: 環境整備による生活の質向上

**社会生活支援領域**:
- **パターンA（関係構築）**: 対人関係スキル向上重視
- **パターンB（参加促進）**: 地域・社会活動への積極参加
- **パターンC（自己表現）**: コミュニケーション能力向上

### 2.3 事業種別特化プロンプト設計例

#### B型事業所プロンプト特化要素
```
重点領域:
- 生活リズム安定化（昼夜逆転改善）
- 作業継続性・集中力向上
- 通所継続支援
- 軽度の生活スキル向上

支援スタンス:
- 本人ペースの尊重
- 段階的な目標設定
- 継続可能な支援計画
```

#### 生活介護事業所プロンプト特化要素
```
重点領域:
- 金銭管理・買い物スキル
- 日常生活動作（食事・入浴・排泄）
- 服薬管理・健康管理
- 社会参加・余暇活動

支援スタンス:
- 個別性重視の丁寧な支援
- 多職種連携による包括的アプローチ
- 家族・地域との連携強化
```

## 3. 実装計画

### Phase 1: 事業種別特化プロンプト実装（優先度: 高）
**目標**: 即効性のある改善を実現
- **期間**: 2-3週間
- **成果物**: 
  - 事業種別特化プロンプトテンプレート
  - `prompts.ts`のリファクタリング
  - 事業種別による重点領域の差別化

**実装内容**:
1. `src/lib/prompts.ts`の分割構造化
2. 事業種別特化プロンプト生成関数作成
3. 既存システムとの互換性維持

### Phase 2: 支援目標3択システム実装（優先度: 中）
**目標**: UXの大幅改善
- **期間**: 4-6週間
- **成果物**:
  - 複数選択肢生成システム
  - 選択式インターフェース
  - 選択理由記録機能

**実装内容**:
1. AI応答形式の拡張（複数パターン生成）
2. フロントエンド選択UIの実装
3. 選択履歴・理由の保存機能

### Phase 3: 高度個人化機能（優先度: 低）
**目標**: システムの完成度向上
- **期間**: 6-8週間
- **成果物**:
  - 学習機能付き提案システム
  - 詳細な個人化設定
  - 統計分析・改善提案機能

## 4. 技術的考慮事項

### 4.1 現在のシステム構成
- **フロントエンド**: Next.js (React)
- **AI**: OpenAI GPT-4o
- **状態管理**: React hooks
- **UI**: Tailwind CSS + shadcn/ui

### 4.2 必要な技術的変更
1. **型定義拡張** (`src/lib/types.ts`)
   - 複数選択肢対応の型追加
   - 事業種別特化設定の型定義

2. **プロンプト生成システム** (`src/lib/prompts.ts`)
   - モジュール化・構造化
   - 動的プロンプト生成

3. **API応答形式** (`src/app/api/generate-plan/route.ts`)
   - 複数選択肢対応
   - 事業種別特化処理

4. **UI コンポーネント**
   - 選択式インターフェース
   - 比較表示機能

### 4.3 パフォーマンス考慮
- **トークン使用量**: 複数生成による増加 → 段階的生成で最適化
- **応答時間**: 選択肢生成時間 → 並列処理・キャッシュ活用
- **コスト**: API呼び出し増加 → 効率的なプロンプト設計

## 5. 期待効果

### 5.1 ユーザビリティ向上
- **専門性向上**: 事業種別に特化した適切な支援計画
- **選択の自由度**: 複数の視点からの提案による柔軟性
- **作業効率化**: より実用的な計画書の生成

### 5.2 品質向上
- **実現可能性**: 事業所特性を反映した現実的な目標設定
- **個別性**: 利用者の多様なニーズへの対応
- **専門性**: 各事業種別の専門知識を反映した内容

### 5.3 システム価値向上
- **差別化**: 他システムにない事業種別特化機能
- **拡張性**: 新しい事業種別・支援手法への対応力
- **学習機能**: 使用データからの継続的改善可能性

## 6. リスクと対策

### 6.1 技術的リスク
- **複雑性増加**: モジュール化による保守性確保
- **互換性**: 段階的移行による既存機能保護
- **性能劣化**: 最適化とテストによる品質維持

### 6.2 ユーザビリティリスク
- **選択肢過多**: 適切なデフォルト設定とガイダンス
- **学習コスト**: 直感的なUI設計と段階的機能公開
- **期待値管理**: 機能の段階的リリースと説明

## 7. 結論

本改善提案は、クライアントの具体的な要望を技術的に実現可能な形で体系化したものです。Phase 1の事業種別特化プロンプトから開始することで、即効性のある改善を提供しつつ、Phase 2、3で段階的にシステムの完成度を高めていく戦略を推奨します。

特に、B型と生活介護の支援内容の差別化、および支援目標の多角的提案は、システムの実用性を大幅に向上させる重要な改善点となります。